<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Expense and Savings Calculator</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
      body {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        min-height: 100vh;
      }
      .form-control {
        background-color: rgba(255, 255, 255, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.3);
        color: white;
      }
      .form-control:focus {
        background-color: rgba(255, 255, 255, 0.2);
        border-color: #fff;
        color: white;
      }
      .form-label {
        color: white;
      }
      .btn-light {
        background-color: rgba(255, 255, 255, 0.2);
        border: none;
        color: white;
      }
      .btn-light:hover {
        background-color: rgba(255, 255, 255, 0.3);
      }
      h1,
      h2,
      h3 {
        color: white;
      }
      p {
        color: white;
      }
    </style>
  </head>
  <body>
    <div class="container mt-5">
      <h1 class="text-center">Monthly Expense and Savings Calculator</h1>
      <div class="row">
        <div class="col-md-6">
          <form id="expenseForm">
            <h4>Month 1</h4>
            <div class="mb-3">
              <label for="income1" class="form-label">Monthly Income</label>
              <input type="number" class="form-control" id="income1" required />
            </div>
            <div class="mb-3">
              <label for="grocery1" class="form-label">Grocery Expense</label>
              <input
                type="number"
                class="form-control"
                id="grocery1"
                required
              />
            </div>
            <div class="mb-3">
              <label for="living1" class="form-label">Living Expense</label>
              <input type="number" class="form-control" id="living1" required />
            </div>
            <div class="mb-3">
              <label for="utilities1" class="form-label">Utilities</label>
              <input
                type="number"
                class="form-control"
                id="utilities1"
                required
              />
            </div>
            <div class="mb-3">
              <label for="maintenance1" class="form-label">Maintenance</label>
              <input
                type="number"
                class="form-control"
                id="maintenance1"
                required
              />
            </div>
            <h4>Month 2</h4>
            <div class="mb-3">
              <label for="income2" class="form-label">Monthly Income</label>
              <input type="number" class="form-control" id="income2" required />
            </div>
            <div class="mb-3">
              <label for="grocery2" class="form-label">Grocery Expense</label>
              <input
                type="number"
                class="form-control"
                id="grocery2"
                required
              />
            </div>
            <div class="mb-3">
              <label for="living2" class="form-label">Living Expense</label>
              <input type="number" class="form-control" id="living2" required />
            </div>
            <div class="mb-3">
              <label for="utilities2" class="form-label">Utilities</label>
              <input
                type="number"
                class="form-control"
                id="utilities2"
                required
              />
            </div>
            <div class="mb-3">
              <label for="maintenance2" class="form-label">Maintenance</label>
              <input
                type="number"
                class="form-control"
                id="maintenance2"
                required
              />
            </div>
            <h4>Month 3</h4>
            <div class="mb-3">
              <label for="income3" class="form-label">Monthly Income</label>
              <input type="number" class="form-control" id="income3" required />
            </div>
            <div class="mb-3">
              <label for="grocery3" class="form-label">Grocery Expense</label>
              <input
                type="number"
                class="form-control"
                id="grocery3"
                required
              />
            </div>
            <div class="mb-3">
              <label for="living3" class="form-label">Living Expense</label>
              <input type="number" class="form-control" id="living3" required />
            </div>
            <div class="mb-3">
              <label for="utilities3" class="form-label">Utilities</label>
              <input
                type="number"
                class="form-control"
                id="utilities3"
                required
              />
            </div>
            <div class="mb-3">
              <label for="maintenance3" class="form-label">Maintenance</label>
              <input
                type="number"
                class="form-control"
                id="maintenance3"
                required
              />
            </div>
            <button type="submit" class="btn btn-light">Calculate</button>
          </form>
        </div>
        <div class="col-md-6" id="charts" style="display: none">
          <canvas id="expenseChart"></canvas>
        </div>
      </div>
      <div class="row mt-5" id="results" style="display: none">
        <div class="col-md-6">
          <canvas id="incomeExpenseChart"></canvas>
        </div>
        <div class="col-md-6">
          <h3>Investment Suggestions</h3>
          <p id="suggestions"></p>
        </div>
      </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      function typeWriter(text, element, speed = 50) {
        let i = 0;
        element.textContent = "";
        function type() {
          if (i < text.length) {
            element.textContent += text.charAt(i);
            i++;
            setTimeout(type, speed);
          }
        }
        type();
      }

      document
        .getElementById("expenseForm")
        .addEventListener("submit", function (e) {
          e.preventDefault();
          const months = 3;
          let incomes = [],
            groceries = [],
            livings = [],
            utilitiesArr = [],
            maintenances = [];
          for (let i = 1; i <= months; i++) {
            incomes.push(
              parseFloat(document.getElementById(`income${i}`).value),
            );
            groceries.push(
              parseFloat(document.getElementById(`grocery${i}`).value),
            );
            livings.push(
              parseFloat(document.getElementById(`living${i}`).value),
            );
            utilitiesArr.push(
              parseFloat(document.getElementById(`utilities${i}`).value),
            );
            maintenances.push(
              parseFloat(document.getElementById(`maintenance${i}`).value),
            );
          }
          let totalExpenses = [],
            savings = [];
          for (let i = 0; i < months; i++) {
            const totalExp =
              groceries[i] + livings[i] + utilitiesArr[i] + maintenances[i];
            totalExpenses.push(totalExp);
            savings.push(incomes[i] - totalExp);
          }

          // Average expenses for donut
          const avgGrocery = groceries.reduce((a, b) => a + b) / months;
          const avgLiving = livings.reduce((a, b) => a + b) / months;
          const avgUtilities = utilitiesArr.reduce((a, b) => a + b) / months;
          const avgMaintenance = maintenances.reduce((a, b) => a + b) / months;

          // Donut chart for average expenses
          const ctxDonut = document
            .getElementById("expenseChart")
            .getContext("2d");
          new Chart(ctxDonut, {
            type: "doughnut",
            data: {
              labels: ["Grocery", "Living", "Utilities", "Maintenance"],
              datasets: [
                {
                  data: [avgGrocery, avgLiving, avgUtilities, avgMaintenance],
                  backgroundColor: ["#FF6384", "#36A2EB", "#FFCE56", "#4BC0C0"],
                  borderColor: "#fff",
                  borderWidth: 2,
                },
              ],
            },
            options: {
              responsive: true,
              plugins: {
                legend: {
                  labels: {
                    color: "white",
                  },
                },
                tooltip: {
                  callbacks: {
                    label: function (context) {
                      return context.label + ": $" + context.parsed.toFixed(2);
                    },
                  },
                },
              },
            },
          });

          // Line chart for trends
          const ctxBar = document
            .getElementById("incomeExpenseChart")
            .getContext("2d");
          new Chart(ctxBar, {
            type: "line",
            data: {
              labels: ["Month 1", "Month 2", "Month 3"],
              datasets: [
                {
                  label: "Income",
                  data: incomes,
                  borderColor: "lightgreen",
                  backgroundColor: "rgba(144, 238, 144, 0.2)",
                  borderWidth: 2,
                  fill: false,
                },
                {
                  label: "Total Expense",
                  data: totalExpenses,
                  borderColor: "lightcoral",
                  backgroundColor: "rgba(240, 128, 128, 0.2)",
                  borderWidth: 2,
                  fill: false,
                },
                {
                  label: "Savings",
                  data: savings,
                  borderColor: "lightblue",
                  backgroundColor: "rgba(173, 216, 230, 0.2)",
                  borderWidth: 2,
                  fill: false,
                },
              ],
            },
            options: {
              responsive: true,
              scales: {
                y: {
                  beginAtZero: true,
                  ticks: {
                    color: "white",
                  },
                  grid: {
                    color: "rgba(255,255,255,0.1)",
                  },
                },
                x: {
                  ticks: {
                    color: "white",
                  },
                  grid: {
                    color: "rgba(255,255,255,0.1)",
                  },
                },
              },
              plugins: {
                legend: {
                  labels: {
                    color: "white",
                  },
                },
                tooltip: {
                  callbacks: {
                    label: function (context) {
                      return (
                        context.dataset.label +
                        ": $" +
                        context.parsed.y.toFixed(2)
                      );
                    },
                  },
                },
              },
            },
          });

          const avgSavings = savings.reduce((a, b) => a + b) / months;
          let suggestions = "";
          if (avgSavings > 10000) {
            suggestions =
              "With high average savings, consider investing in high-growth areas like technology stocks, cryptocurrencies, or real estate. Current trends show AI and renewable energy sectors performing well.";
          } else if (avgSavings > 5000) {
            suggestions =
              "Moderate average savings suggest diversified investments such as index funds, ETFs, or bonds. Look into sustainable investing trends.";
          } else if (avgSavings > 0) {
            suggestions =
              "Low average savings: Focus on building an emergency fund first. Then consider low-risk options like high-yield savings accounts or CDs.";
          } else {
            suggestions =
              "You are spending more than you earn on average. Consider reducing expenses or increasing income.";
          }

          typeWriter(suggestions, document.getElementById("suggestions"));

          document.getElementById("charts").style.display = "block";
          document.getElementById("results").style.display = "block";
        });
    </script>
  </body>
</html>
